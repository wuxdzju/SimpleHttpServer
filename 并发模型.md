并发模型
---
程序使用"non-blocking  IO + IO multiplexing "模型，即reactor模式，并使用多线程提高并发度。使用线程池以避免线程频繁创建和销毁带来的开销。使用poll作为IO多路复用的实现方式。
#### 并发模型

#### reactor模式
在"non-blocking  IO + IO multiplexing "这种模型中，程序的基本结构是一个事件循环（event loop），以事件驱动和事件回调的方式实现业务逻辑。

#### one loop per thread
在此种模型下，程序里的每个IO线程有且只能有一个event loop（reactor），用于处理读写和定时事件。这样做的好处是：IO事件发生的线程是固定的，同一个TCP连接不必考虑事件并发。
在多线程程序中，在这种模式下需要保证event loop的“线程安全”，即允许一个线程往别的线程塞东西，比如主IO线程收到一个新建连接，分配给某个子IO线程处理。

#### 线程池
在初始时，创建固定大小的线程池，并为每一个线程创建一个唯一的event loop。主线程的event loop只用来接受新连接，而新连接会用其他的event loop来执行IO。本项目中采用round-robin算法，来选取线程池中的event loop（即选取一个IO线程），每个TCP Connection从建立连接到断开连接只属于这一个线程，在运行时不可更换event loop（即自始至终只属于一个线程）。

